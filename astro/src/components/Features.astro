---
const features = [
  {
    title: "Envío Ultra Rápido",
    desc: "Recibe tu pedido en 48 horas con seguimiento en tiempo real.",
    color: "#6ee7b7",
    svg: `<svg class="feat-icon" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path class="draw" d="M6 24H34M34 24L26 16M34 24L26 32" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
      <path class="draw" d="M38 16H42C43.1 16 44 16.9 44 18V30C44 31.1 43.1 32 42 32H38V16Z" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
      <circle class="draw" cx="14" cy="36" r="3" stroke="currentColor" stroke-width="3"/>
      <circle class="draw" cx="34" cy="36" r="3" stroke="currentColor" stroke-width="3"/>
      <path class="draw" d="M4 36H11M17 36H31M37 36H44" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
    </svg>`,
  },
  {
    title: "Pago 100% Seguro",
    desc: "Transacciones cifradas con los estándares más altos del mercado.",
    color: "#93c5fd",
    svg: `<svg class="feat-icon" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path class="draw" d="M24 4L8 10V22C8 31.4 15.1 40.2 24 42C32.9 40.2 40 31.4 40 22V10L24 4Z" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
      <path class="draw" d="M17 24L21 28L31 18" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
  },
  {
    title: "Garantía 30 Días",
    desc: "No te convence? Devolvemos tu dinero sin preguntas.",
    color: "#fcd34d",
    svg: `<svg class="feat-icon" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle class="draw" cx="24" cy="24" r="18" stroke="currentColor" stroke-width="3"/>
      <path class="draw" d="M24 14V24L30 30" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
      <path class="draw" d="M8 8L6 6M40 8L42 6" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
    </svg>`,
  },
  {
    title: "Soporte Premium",
    desc: "Nuestro equipo te atiende por WhatsApp de lunes a sábado.",
    color: "#f9a8d4",
    svg: `<svg class="feat-icon" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path class="draw" d="M40 28C40 29.1 39.1 30 38 30H14L8 36V12C8 10.9 8.9 10 10 10H38C39.1 10 40 10.9 40 12V28Z" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
      <path class="draw" d="M18 20H30M18 25H26" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
    </svg>`,
  },
  {
    title: "Productos Originales",
    desc: "Trabajamos directamente con distribuidores autorizados.",
    color: "#c4b5fd",
    svg: `<svg class="feat-icon" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <polygon class="draw" points="24,4 29,17 43,17 32,26 36,40 24,32 12,40 16,26 5,17 19,17" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,
  },
  {
    title: "Precios Imbatibles",
    desc: "Comparamos precios diariamente para ofrecerte la mejor oferta.",
    color: "#fca5a5",
    svg: `<svg class="feat-icon" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path class="draw" d="M24 8V40M16 14H28C30.2 14 32 15.8 32 18C32 20.2 30.2 22 28 22H20C17.8 22 16 23.8 16 26C16 28.2 17.8 30 20 30H32" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
    </svg>`,
  },
];
---

<!-- Wave superior -->
<div class="wave-top" aria-hidden="true">
  <svg
    viewBox="0 0 1440 60"
    preserveAspectRatio="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M0,30 C360,60 1080,0 1440,30 L1440,60 L0,60 Z"
      fill="var(--surface)"></path>
  </svg>
</div>

<section class="features" id="por-que-elegirnos">
  <div class="container">
    <div class="features__header">
      <span class="features__eyebrow">Nuestra promesa</span>
      <h2 class="features__title">¿Por qué elegirnos? ✨</h2>
      <p class="features__subtitle">
        Cada detalle está pensado para que tu experiencia de compra sea
        perfecta.
      </p>
    </div>

    <div class="features__grid">
      {
        features.map((f, i) => (
          <div
            class="feat-card"
            style={`--feat-color: ${f.color}; --delay: ${i * 0.1}s`}
          >
            <div class="feat-card__icon-wrap" set:html={f.svg} />
            <h3 class="feat-card__title">{f.title}</h3>
            <p class="feat-card__desc">{f.desc}</p>
          </div>
        ))
      }
    </div>
  </div>
</section>

<!-- Wave inferior -->
<div class="wave-bot" aria-hidden="true">
  <svg
    viewBox="0 0 1440 60"
    preserveAspectRatio="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path d="M0,30 C360,0 1080,60 1440,30 L1440,0 L0,0 Z" fill="var(--surface)"
    ></path>
  </svg>
</div>

<style>
  /* ─── Waves ─────────────────────────────────────────────────── */
  .wave-top,
  .wave-bot {
    line-height: 0;
    overflow: hidden;
  }
  .wave-top svg,
  .wave-bot svg {
    width: 100%;
    height: 60px;
    display: block;
  }

  /* ─── Section ───────────────────────────────────────────────── */
  .features {
    background: var(--surface);
    padding: 4rem 0;
  }

  .features__header {
    text-align: center;
    margin-bottom: 3.5rem;
  }

  .features__eyebrow {
    display: inline-block;
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--primary-light);
    margin-bottom: 0.6rem;
  }

  .features__title {
    font-size: clamp(1.6rem, 3.5vw, 2.2rem);
    font-weight: 900;
    color: var(--text);
    margin-bottom: 0.75rem;
    letter-spacing: -0.02em;
  }

  .features__subtitle {
    font-size: 1rem;
    color: var(--text-muted);
    max-width: 480px;
    margin: 0 auto;
    line-height: 1.6;
  }

  /* ─── Grid ──────────────────────────────────────────────────── */
  .features__grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
  }

  /* ─── Card ──────────────────────────────────────────────────── */
  .feat-card {
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 2rem 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    position: relative;
    overflow: hidden;
    transition:
      transform var(--transition),
      box-shadow var(--transition),
      border-color var(--transition);
    animation: feat-in 0.6s var(--delay, 0s) both;
  }

  @keyframes feat-in {
    from {
      opacity: 0;
      transform: translateY(24px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Gradiente de esquina al hover */
  .feat-card::before {
    content: "";
    position: absolute;
    top: -40px;
    right: -40px;
    width: 120px;
    height: 120px;
    background: radial-gradient(circle, var(--feat-color), transparent 70%);
    opacity: 0;
    transition: opacity var(--transition-slow);
    pointer-events: none;
  }

  .feat-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 16px 40px rgba(0, 0, 0, 0.35);
    border-color: var(--feat-color);
  }

  .feat-card:hover::before {
    opacity: 0.15;
  }

  /* ─── Icon ──────────────────────────────────────────────────── */
  .feat-card__icon-wrap {
    width: 56px;
    height: 56px;
    color: var(--feat-color);
    position: relative;
    z-index: 1;
  }

  /* El SVG ocupa el wrapper */
  :global(.feat-icon) {
    width: 100%;
    height: 100%;
  }

  /* Animación: dibujar el trazo SVG al hacer hover en la card */
  :global(.feat-icon .draw) {
    stroke-dasharray: 200;
    stroke-dashoffset: 0;
    transition: stroke-dashoffset 0.7s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .feat-card:hover :global(.feat-icon .draw) {
    stroke-dashoffset: 200;
    animation: redraw 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }

  @keyframes redraw {
    from {
      stroke-dashoffset: 200;
    }
    to {
      stroke-dashoffset: 0;
    }
  }

  /* ─── Text ──────────────────────────────────────────────────── */
  .feat-card__title {
    font-size: 1rem;
    font-weight: 700;
    color: var(--text);
    line-height: 1.3;
  }

  .feat-card__desc {
    font-size: 0.875rem;
    color: var(--text-muted);
    line-height: 1.6;
    flex: 1;
  }

  /* ─── Responsive ────────────────────────────────────────────── */
  @media (max-width: 900px) {
    .features__grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 560px) {
    .features__grid {
      grid-template-columns: 1fr;
    }
    .features {
      padding: 3rem 0;
    }
  }
</style>
